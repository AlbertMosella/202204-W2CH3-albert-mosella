const pasapalabra1 = [
  {
    letra: "a",
    respuesta: "abducir",
    estado: 0,
    pregunta:
      "CON LA A. Dicho de una supuesta criatura extraterrestre: Apoderarse de alguien",
  },

  {
    letra: "b",
    respuesta: "bingo",
    estado: 0,
    pregunta:
      "CON LA B. Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso",
  },

  {
    letra: "c",
    respuesta: "churumbel",
    estado: 0,
    pregunta: "CON LA C. Niño, crío, bebé",
  },

  {
    letra: "d",
    respuesta: "diarrea",
    estado: 0,
    pregunta:
      "CON LA D. Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida",
  },

  {
    letra: "e",
    respuesta: "ectoplasma",
    estado: 0,
    pregunta:
      "CON LA E. Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación",
  },

  {
    letra: "f",
    respuesta: "facil",
    estado: 0,
    pregunta: "CON LA F. Que no requiere gran esfuerzo, capacidad o dificultad",
  },

  {
    letra: "g",
    respuesta: "galaxia",
    estado: 0,
    pregunta:
      "CON LA G. Conjunto enorme de estrellas, polvo interestelar, gases y partículas",
  },

  {
    letra: "h",
    respuesta: "harakiri",
    estado: 0,
    pregunta: "CON LA H. Suicidio ritual japonés por desentrañamiento",
  },

  {
    letra: "i",
    respuesta: "iglesia",
    estado: 0,
    pregunta: "CON LA I. Templo cristiano",
  },

  {
    letra: "j",
    respuesta: "jabali",
    estado: 0,
    pregunta:
      "CON LA J. Variedad salvaje del cerdo que sale en la película 'El Rey León', de name Pumba",
  },

  {
    letra: "k",
    respuesta: "kamikaze",
    estado: 0,
    pregunta:
      "CON LA K. Persona que se juega la vida realizando una acción temeraria",
  },

  {
    letra: "l",
    respuesta: "licantropo",
    estado: 0,
    pregunta: "CON LA L. Hombre lobo",
  },

  {
    letra: "m",
    respuesta: "misantropo",
    estado: 0,
    pregunta:
      "CON LA M. Persona que huye del trato con otras personas o siente gran aversión hacia ellas",
  },

  {
    letra: "n",
    respuesta: "necedad",
    estado: 0,
    pregunta: "CON LA N. Demostración de poca inteligencia",
  },

  {
    letra: "ñ",
    respuesta: "señal",
    estado: 0,
    pregunta:
      "CONTIENE LA Ñ. Indicio que permite deducir algo de lo que no se tiene un conocimiento directo.",
  },

  {
    letra: "o",
    respuesta: "orco",
    estado: 0,
    pregunta:
      "CON LA O. Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien",
  },

  {
    letra: "p",
    respuesta: "protoss",
    estado: 0,
    pregunta:
      "CON LA P. Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft",
  },

  {
    letra: "q",
    respuesta: "queso",
    estado: 0,
    pregunta:
      "CON LA Q. Producto obtenido por la maduración de la cuajada de la leche",
  },

  { letra: "r", respuesta: "raton", estado: 0, pregunta: "CON LA R. Roedor" },

  {
    letra: "s",
    respuesta: "stackoverflow",
    estado: 0,
    pregunta: "CON LA S. Comunidad salvadora de todo desarrollador informático",
  },

  {
    letra: "t",
    respuesta: "terminator",
    estado: 0,
    pregunta:
      "CON LA T. Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984",
  },

  {
    letra: "u",
    respuesta: "unamuno",
    estado: 0,
    pregunta:
      "CON LA U. Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914",
  },

  {
    letra: "v",
    respuesta: "vikingos",
    estado: 0,
    pregunta:
      "CON LA V. name dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa",
  },

  {
    letra: "w",
    respuesta: "sandwich",
    estado: 0,
    pregunta:
      "CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso",
  },

  {
    letra: "x",
    respuesta: "botox",
    estado: 0,
    pregunta: "CONTIENE LA X. Toxina bacteriana utilizada en cirujía estética",
  },

  {
    letra: "y",
    respuesta: "peyote",
    estado: 0,
    pregunta:
      "CONTIENE LA Y. Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal por indígenas americanos",
  },

  {
    letra: "z",
    respuesta: "zen",
    estado: 0,
    pregunta:
      "CON LA Z. Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional",
  },
];

const pasapalabra2 = [
  {
    letra: "a",
    respuesta: "añorar",
    estado: 0,
    pregunta:
      "CON LA A. Sentir tristeza al recordar a una persona o cosa que está ausente",
  },

  {
    letra: "b",
    respuesta: "burro",
    estado: 0,
    pregunta: "CON LA B. Que es rudo e ignorante",
  },

  {
    letra: "c",
    respuesta: "corazon",
    estado: 0,
    pregunta:
      "CON LA C. Órgano central de la circulación de la sangre, que en los animales inferiores es la simple dilatación de un vaso y en los superiores es musculoso, contráctil, y tiene dos, tres o cuatro cavidades.",
  },

  {
    letra: "d",
    respuesta: "desastre",
    estado: 0,
    pregunta: "CON LA D. Suceso que produce mucho daño o destrucción.",
  },

  {
    letra: "e",
    respuesta: "enano",
    estado: 0,
    pregunta: "CON LA E. Que es muy pequeño",
  },

  {
    letra: "f",
    respuesta: "flecha",
    estado: 0,
    pregunta:
      "CON LA F. Proyectil que se dispara mediante un arco y que consiste en una vara delgada y ligera terminada en una punta afilada",
  },

  {
    letra: "g",
    respuesta: "gato",
    estado: 0,
    pregunta: "CON LA G. Mamífero felino de tamaño generalmente pequeño",
  },

  {
    letra: "h",
    respuesta: "hocico",
    estado: 0,
    pregunta:
      "CON LA H. Parte saliente y prolongada de la cara de algunos animales, especialmente mamíferos, en la que están situados la boca y los orificios nasales",
  },

  {
    letra: "i",
    respuesta: "intrinseco",
    estado: 0,
    pregunta:
      "CON LA I. Que es propio o característico de la cosa que se expresa por sí misma y no depende de las circunstancias.",
  },

  {
    letra: "j",
    respuesta: "jabalina",
    estado: 0,
    pregunta:
      "CON LA J. Arma, a manera de venablo largo, que se lanzaba a mano y se usaba en la caza mayor",
  },

  {
    letra: "k",
    respuesta: "karma",
    estado: 0,
    pregunta:
      "CON LA K. En la religión budista y en el hinduismo, creencia según la cual toda acción tiene una fuerza dinámica que se expresa e influye en las sucesivas existencias del individuo.",
  },

  {
    letra: "l",
    respuesta: "libertad",
    estado: 0,
    pregunta:
      "CON LA L. Facultad y derecho de las personas para elegir de manera responsable su propia forma de actuar dentro de una sociedad.",
  },

  {
    letra: "m",
    respuesta: "mito",
    estado: 0,
    pregunta:
      "CON LA M. Historia imaginaria que altera las verdaderas cualidades de una persona o de una cosa y les da más valor del que tienen en realidad.",
  },

  {
    letra: "n",
    respuesta: "noticia",
    estado: 0,
    pregunta:
      "CON LA N. Comunicación o informe que se da acerca de un hecho o un suceso reciente, en especial si se divulga en un medio de comunicación.",
  },

  {
    letra: "ñ",
    respuesta: "pañal",
    estado: 0,
    pregunta:
      "CONTIENE LA Ñ. Pieza cuadrada de tela con que se envuelve a un bebé",
  },

  {
    letra: "o",
    respuesta: "ornitologo",
    estado: 0,
    pregunta: "CON LA O. Persona que se dedica a la ornitología",
  },

  {
    letra: "p",
    respuesta: "paz",
    estado: 0,
    pregunta:
      "CON LA P. Situación o estado en que no hay guerra ni luchas entre dos o más partes enfrentadas",
  },

  {
    letra: "q",
    respuesta: "quimica",
    estado: 0,
    pregunta:
      "CON LA Q. Ciencia que estudia la composición y las propiedades de la materia y de las transformaciones que esta experimenta sin que se alteren los elementos que la forman.",
  },

  { letra: "r", respuesta: "rata", estado: 0, pregunta: "CON LA R. Roedor" },

  {
    letra: "s",
    respuesta: "software",
    estado: 0,
    pregunta:
      "CON LA S. Conjunto de programas y rutinas que permiten a la computadora realizar determinadas tareas.",
  },

  {
    letra: "t",
    respuesta: "trabajo",
    estado: 0,
    pregunta: "CON LA T. Acción o actividad de trabajar",
  },

  {
    letra: "u",
    respuesta: "utopia",
    estado: 0,
    pregunta:
      "CON LA U. Plan o sistema ideal de gobierno en el que se concibe una sociedad perfecta y justa, donde todo discurre sin conflictos y en armonía.",
  },

  {
    letra: "v",
    respuesta: "victoria",
    estado: 0,
    pregunta: "CON LA V. Hecho de vencer en una competición o una lucha.",
  },

  {
    letra: "w",
    respuesta: "sandwich",
    estado: 0,
    pregunta:
      "CON LA W. Conjunto de información que se encuentra en una dirección determinada de internet",
  },

  {
    letra: "x",
    respuesta: "xilofono",
    estado: 0,
    pregunta:
      "CON LA X. Instrumento musical de percusión formado por una serie de láminas de madera dispuestas horizontalmente y ordenadas según su tamaño",
  },

  {
    letra: "y",
    respuesta: "yugo",
    estado: 0,
    pregunta:
      "CON LA Y. Dominio u opresión que una o varias personas ejercen despóticamente sobre otras",
  },

  {
    letra: "z",
    respuesta: "zeta",
    estado: 0,
    pregunta: "CON LA Z. name de la letra z",
  },
];

const pasapalabra3 = [
  {
    letra: "a",
    respuesta: "atardecer",
    estado: 0,
    pregunta:
      "CON LA A. Llegar la última hora de la tarde, cuando disminuye la luz del sol.",
  },

  {
    letra: "b",
    respuesta: "batalla",
    estado: 0,
    pregunta: "CON LA B. Enfrentamiento armado entre distintos ejércitos",
  },

  {
    letra: "c",
    respuesta: "celula",
    estado: 0,
    pregunta:
      "CON LA C. Unidad anatómica fundamental de todos los organismos vivos, generalmente microscópica, formada por citoplasma, uno o más núcleos y una membrana que la rodea.",
  },

  {
    letra: "d",
    respuesta: "democracia",
    estado: 0,
    pregunta:
      "CON LA D. Sistema político que defiende la soberanía del pueblo y el derecho del pueblo a elegir y controlar a sus gobernantes.",
  },

  {
    letra: "e",
    respuesta: "elipse",
    estado: 0,
    pregunta:
      "CON LA E. Figura geométrica curva y cerrada, con dos ejes perpendiculares desiguales, que resulta de cortar la superficie de un cono por un plano no perpendicular a su eje, y que tiene la forma de un círculo achatado.",
  },

  {
    letra: "f",
    respuesta: "familia",
    estado: 0,
    pregunta:
      "CON LA F. Conjunto de ascendientes, descendientes y demás personas relacionadas entre sí por parentesco de sangre o legal.",
  },

  {
    letra: "g",
    respuesta: "gritar",
    estado: 0,
    pregunta: "CON LA G. Dar gritos",
  },

  {
    letra: "h",
    respuesta: "hardware",
    estado: 0,
    pregunta:
      "CON LA H. Conjunto de elementos físicos o materiales que constituyen una computadora o un sistema informático.",
  },

  {
    letra: "i",
    respuesta: "internet",
    estado: 0,
    pregunta:
      "CON LA I. Red informática de nivel mundial que utiliza la línea telefónica para transmitir la información",
  },

  {
    letra: "j",
    respuesta: "jabato",
    estado: 0,
    pregunta: "CON LA J.Cría del jabalí",
  },

  {
    letra: "k",
    respuesta: "kilogramo",
    estado: 0,
    pregunta:
      "CON LA K. Unidad de masa del Sistema Internacional, de símbolo kg",
  },

  {
    letra: "l",
    respuesta: "leche",
    estado: 0,
    pregunta:
      "CON LA L. Sustancia líquida y blanca que segregan las mamas de las hembras de los mamíferos para alimentar a sus crías",
  },

  {
    letra: "m",
    respuesta: "mecenas",
    estado: 0,
    pregunta:
      "CON LA M. Persona o fundación rica y poderosa que protege a los artistas y adquiere o promueve sus obras.",
  },

  {
    letra: "n",
    respuesta: "nectar",
    estado: 0,
    pregunta:
      "CON LA N. Sustancia líquida dulce que se encuentra en el interior de algunas flores y sirve de alimento a los insectos.",
  },

  {
    letra: "ñ",
    respuesta: "caña",
    estado: 0,
    pregunta:
      "CONTIENE LA Ñ. Tallo propio de las plantas gramíneas que, generalmente, está hueco y dividido en segmentos",
  },

  {
    letra: "o",
    respuesta: "opiaceo",
    estado: 0,
    pregunta: "CON LA O. Que deriva del opio",
  },

  {
    letra: "p",
    respuesta: "plebiscito",
    estado: 0,
    pregunta:
      "CON LA P. Procedimiento jurídico por el que se somete a votación popular una ley o un asunto de especial importancia para el Estado",
  },

  {
    letra: "q",
    respuesta: "quimera",
    estado: 0,
    pregunta:
      "CON LA Q. Sueño o ilusión que es producto de la imaginación y que se anhela o se persigue pese a ser muy improbable que se realice.",
  },

  {
    letra: "r",
    respuesta: "replica",
    estado: 0,
    pregunta: "CON LA R. Contestación, respuesta.",
  },

  {
    letra: "s",
    respuesta: "salud",
    estado: 0,
    pregunta:
      "CON LA S. Estado en que un ser u organismo vivo no tiene ninguna lesión ni padece ninguna enfermedad y ejerce con normalidad todas sus funciones.",
  },

  {
    letra: "t",
    respuesta: "tolerancia",
    estado: 0,
    pregunta:
      "CON LA T. Actitud de la persona que respeta las opiniones, ideas o actitudes de las demás personas aunque no coincidan con las propias.",
  },

  {
    letra: "u",
    respuesta: "universo",
    estado: 0,
    pregunta:
      "CON LA U. Conjunto de todo lo que tiene existencia física, en la Tierra y fuera de ella.",
  },

  {
    letra: "v",
    respuesta: "virus",
    estado: 0,
    pregunta:
      "CON LA V. Microorganismo compuesto de material genético protegido por un envoltorio proteico, que causa diversas enfermedades introduciéndose como parásito en una célula para reproducirse en ella.",
  },

  {
    letra: "w",
    respuesta: "webcam",
    estado: 0,
    pregunta:
      "CONTIENE LA W. Cámara de vídeo miniaturizada que se puede conectar a un ordenador para grabar imágenes o emitirlas en directo a través de Internet.",
  },

  {
    letra: "x",
    respuesta: "xenofobia",
    estado: 0,
    pregunta: "CON LA X. Rechazo a los extranjeros.",
  },

  {
    letra: "y",
    respuesta: "yoga",
    estado: 0,
    pregunta:
      "CONTIENE LA Y. Conjunto de técnicas de concentración derivadas de esta doctrina filosófica que se practican para conseguir un mayor control físico y mental.",
  },

  {
    letra: "z",
    respuesta: "zumo",
    estado: 0,
    pregunta:
      "CON LA Z. Líquido contenido en el tejido de las frutas que puede extraerse por presión, cocción, etc., y beberse.",
  },
];

let pasapalabra = [];
let userName;
let userAnswer;
let questionNumber = 0;
let totalTime = 180;
let gameOver = false;
const displayInfo = document.querySelector("#display-info");
const displayQuestion = document.querySelector("#display-question");

const getUserName = () => {
  userName = prompt("Introduce tu nombre:");
  if (!userName) {
    userName = "Invitado";
  } else {
    const userWelcome = document.querySelector("#welcome");
    userWelcome.innerHTML = `Hola ${userName} y bienvenido a Pasapalabra!`;
  }
  displayInfo.innerHTML =
    "El juego está a punto de empezar, tienes tres minutos para responder a todas las preguntas. Cuando estes listo presiona el boton 'Empezar el juego!'";
};

const activateStartButton = () => {
  const startButton = document.querySelector("#start-button");
  startButton.addEventListener("click", startPlaying);
};

const startPlaying = () => {
  document.querySelector("#start-button").disabled = true;
  const okButton = document.querySelector("#ok-button");
  okButton.addEventListener("click", getUserAnswer);
  document.addEventListener("keypress", function (e) {
    if (e.key === "Enter") {
      getUserAnswer();
    }
  });
  const pasapalabraButton = document.querySelector("#pasapalabra-button");
  pasapalabraButton.addEventListener("click", pasapalabraByUser);
  const endButton = document.querySelector("#end-button");
  endButton.addEventListener("click", endGame);
  displayInfo.innerHTML = "Empezamos!";
  randomQuestions();
  timer();
  showQuestions();
};

const randomQuestions = () => {
  let questionPackage = Math.round(Math.random() * (3 - 1) + 1);
  if (questionPackage === 1) {
    for (let i = 0; i < pasapalabra1.length; i++) {
      pasapalabra.push(pasapalabra1[i]);
    }
  } else if (questionPackage === 2) {
    for (let i = 0; i < pasapalabra2.length; i++) {
      pasapalabra.push(pasapalabra2[i]);
    }
  } else if (questionPackage === 3) {
    for (let i = 0; i < pasapalabra3.length; i++) {
      pasapalabra.push(pasapalabra3[i]);
    }
  }
};

const timer = () => {
  document.querySelector("#start-button").innerHTML = totalTime;
  if (totalTime === 0 && !gameOver) {
    endGame();
  } else {
    if (totalTime > 0) {
      totalTime -= 1;
      setTimeout("timer()", 1000);
    }
  }
};

const showQuestions = () => {
  if (pasapalabra[questionNumber].estado === 0) {
    displayQuestion.innerHTML = pasapalabra[questionNumber].pregunta;
  } else {
    checkStillQuestionsToMake();
  }
};

const getUserAnswer = () => {
  const textInput = document.querySelector("#text-input");
  userAnswer = textInput.value;
  if (userAnswer) {
    checkAnswer();
    questionNumber += 1;
    if (questionNumber === 27) {
      questionNumber = 0;
    }
    showQuestions();
  }
};

const checkAnswer = () => {
  if (userAnswer.toLowerCase() === pasapalabra[questionNumber].respuesta) {
    displayInfo.innerHTML = "Has acertado, has ganado un punto!";
    pasapalabra[questionNumber].estado = 1;
    checkLettersColor();
    cleanInput();
  } else {
    displayInfo.innerHTML = `Has fallado, has perdido un punto! La respuesta correcta era: ${pasapalabra[questionNumber].respuesta}!`;
    pasapalabra[questionNumber].estado = -1;
    checkLettersColor();
    cleanInput();
  }
};

const checkLettersColor = () => {
  for (let i = 0; i < pasapalabra.length; i++) {
    if (pasapalabra[i].estado === 1) {
      document.querySelector(
        `#${pasapalabra[i].letra.toUpperCase()}`
      ).className = `${pasapalabra[i].letra}-correct letter`;
    } else if (pasapalabra[i].estado === -1) {
      document.querySelector(
        `#${pasapalabra[i].letra.toUpperCase()}`
      ).className = `${pasapalabra[i].letra}-incorrect letter`;
    }
  }
};

const cleanInput = () => {
  const textInput = document.querySelector("#text-input");
  textInput.value = "";
  userAnswer = "";
};

const checkStillQuestionsToMake = () => {
  for (let i = 0; i < pasapalabra.length; i++) {
    if (pasapalabra[i].estado === 0) {
      gameOver = false;
      nextQuestion();
      return;
    }
  }
  endGame();
};

const nextQuestion = () => {
  questionNumber += 1;
  if (questionNumber === 27) {
    questionNumber = 0;
  }
  showQuestions();
};

const pasapalabraByUser = () => {
  displayInfo.innerHTML = "Has pasado palabra!";
  questionNumber += 1;
  if (questionNumber === 27) {
    questionNumber = 0;
  }
  showQuestions();
};

const endGame = () => {
  gameOver = true;
  totalTime = 0;
  document.querySelector("#ok-button").disabled = true;
  document.querySelector("#pasapalabra-button").disabled = true;
  document.querySelector("#end-button").disabled = true;
  displayQuestion.innerHTML = "";
  let rigthsWrongs = calculateRightWrong();
  displayInfo.innerHTML = `Has finalizado el juego! Has completado el 
  rosco con un total de ${calculatePoints()} puntos! Has acertado un 
  total de ${rigthsWrongs[0]} letras y has fallado un total de 
  ${rigthsWrongs[1]} letras!`;
  showRanking(rigthsWrongs[0]);
};

const calculatePoints = () => {
  let totalPoints = 0;
  for (let i = 0; i < pasapalabra.length; i++) {
    totalPoints += pasapalabra[i].estado;
  }
  return totalPoints;
};

const calculateRightWrong = () => {
  let totalRights = 0;
  let totalWrongs = 0;
  for (let i = 0; i < pasapalabra.length; i++) {
    if (pasapalabra[i].estado === 1) {
      totalRights += 1;
    }
  }
  totalWrongs = 27 - totalRights;
  let rigthsWrongsBalance = [totalRights, totalWrongs];
  return rigthsWrongsBalance;
};

let ranking = [
  { name: "Freddy Mercuri", rights: 27 },
  { name: "Roger Waters", rights: 23 },
  { name: "Don McLean", rights: 19 },
  { name: "Cat Stevens", rights: 17 },
  { name: "Roberta Flack", rights: 11 },
  { name: "Billie Holiday", rights: 9 },
];

const showRanking = (totalRights) => {
  ranking.push({ name: userName, rights: totalRights });
  ranking.sort(function (a, b) {
    return b.rights - a.rights;
  });

  let prettyRanking = `RANKING: 1º. ${ranking[0].name} con ${ranking[0].rights} puntos //
  2º. ${ranking[1].name} con ${ranking[1].rights} puntos //
  3º. ${ranking[2].name} con ${ranking[2].rights} puntos //
  4º. ${ranking[3].name} con ${ranking[3].rights} puntos //
  5º. ${ranking[4].name} con ${ranking[4].rights} puntos //
  6º. ${ranking[5].name} con ${ranking[5].rights} puntos //
  7º. ${ranking[6].name} con ${ranking[6].rights} puntos`;

  displayQuestion.innerHTML = prettyRanking;
};

getUserName();
activateStartButton();
